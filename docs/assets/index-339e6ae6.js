import{A as N,S,f as A,V as n,g as E,C as h,h as P,i as m,D as x,j as T,H as B,P as f,e as C,E as M}from"./runBabylonPlaygroundScene-398c9269.js";import{S as L}from"./waterMaterial-b207e12f.js";import{C as k}from"./cannon-f7ce1177.js";import"./_commonjsHelpers-042e6b4d.js";window.CANNON=k;function j(o,s){o.enableOfflineSupport=!1,N.AllowMatricesInterpolation=!0;var e=new S(o);const t=new A("Camera",Math.PI/6,Math.PI/4,50,n.Zero(),e);t.setTarget(n.Zero()),e.enablePhysics(null,new E),e.clearColor=h.White().toColor4();const a=P.CreateGround("ground",{width:1e3,height:1e3},e);a.receiveShadows=!0,a.material=new L("groundMat",e),a.physicsImpostor=new m(a,m.BoxImpostor,{mass:0,restitution:.1},e);var i=new x("directionalLight",new n(-1,-1,-1),e);i.position=new n(0,10,0),i.radius=10,i.specular=h.Black();var l=new T(1024,i);l.setDarkness(.9),l.shadowMaxZ=100;var c=new B("hemisphericLight",new n(1,1,1),e);c.intensity=.8,c.specular=h.Black(),G(e,a,l);var r=!1,d=null;e.onPointerObservable.add(O=>{switch(O.type){case f.POINTERDOWN:r=!0;break;case f.POINTERUP:r=!1,d=null;break;case f.POINTERMOVE:if(r){var w=e.pick(e.pointerX,e.pointerY,g=>g===a);const u=w==null?void 0:w.pickedPoint;if(d&&u){const g=u.subtract(d);e.meshes.forEach(p=>{p.position.subtract(u).length()<3&&p.applyImpulse(g.scale(7),p.absolutePosition)})}d=u}break}});function v(){e.debugLayer.show()}function y(){t.attachControl(s,!1)}const b={debug:v,enableCamera:y};return console.debug("hax",b),Object.assign(window,{hax:b}),e}async function G(o,s,e){for(var t=0;t<100;t++){const a=D(o,s);e.addShadowCaster(a.mesh,!0),await I(10)}}function D(o,s){const e=new h;h.HSVtoRGBToRef(Math.random()*360,.5,1,e);const t=P.CreateBox("cube",{size:1,faceColors:[e.toColor4(),e.toColor4(),e.toColor4(),e.toColor4(),e.toColor4(),e.toColor4()]},o);t.receiveShadows=!0,t.position.set(Math.random()*100-50,2,Math.random()*100-50),t.physicsImpostor=new m(t,m.BoxImpostor,{mass:1,restitution:.5},o);function a(r){t.applyImpulse(r.normalize().scale(2),t.getAbsolutePosition().addInPlaceFromFloats(0,.5,0))}const i=[n.Forward(),n.Backward(),n.Left(),n.Right()];async function l(){for(;;){if(c)if(Math.random()<.25){const r=t.position.scale(-1);a(r)}else{const r=i[Math.trunc(Math.random()*i.length)];a(r)}await I(Math.random()*50+50)}}l();var c=!1;return t.actionManager=new C(o),t.actionManager.registerAction(new M({trigger:C.OnIntersectionEnterTrigger,parameter:s},()=>{c=!0})),t.actionManager.registerAction(new M({trigger:C.OnIntersectionExitTrigger,parameter:s},()=>{c=!1})),{mesh:t,move:a}}function I(o){return new Promise(s=>setTimeout(s,o))}export{j as createScene};
