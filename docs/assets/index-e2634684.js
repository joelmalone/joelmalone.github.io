import{S as U,k as h,H as v,V as i,D as N,U as O,d as B,Q as b,T as S,l as M,m as Q,P as p,n as f}from"./runBabylonPlaygroundScene-398c9269.js";import"./ExtrasAsMetadata-52a7871d.js";function z(g,A){const e=new U(g);e.clearColor=new h(0,0,0);var E=new v("ambient light",new i(0,0,0),e);E.intensity=.25;const P=new N("sun light",new i(1,-1,-1),e);P.intensity=5,g.runRenderLoop(()=>{e.render()});const R=()=>{A.width=A.clientWidth,A.height=A.clientHeight};window.addEventListener("resize",R);const c=new O("UniversalCamera",new i(0,0,0),e);c.maxZ=11e3;let s=null,l=null,o=null;B.ImportMeshAsync(null,"https://dl.dropboxusercontent.com/s/xtxf8eo2t3bb66b/Spaceship_BarbaraTheBee.gltf","",e).then(({meshes:n})=>{o=n[0],o.rotationQuaternion=b.Identity(),s=new S("chaseCameraPosition",e),s.parent=o,s.position=new i(0,4,-15),l=new S("chaseCameraLookAt",e),l.parent=o,l.position=new i(0,2,10)});const t=new M("starfield",1e4,e);t.createSphereEmitter(1e4,0),t.manualEmitCount=1e5,t.minLifeTime=Number.MAX_VALUE,t.maxLifeTime=Number.MAX_VALUE,t.minSize=.1*1e3,t.maxSize=.25*1e3,t.minEmitPower=0,t.maxEmitPower=0,t.gravity=new i(0,0,0),t.color1=new h(1,.8,.8,1),t.color2=new h(1,1,1,1),t.particleTexture=new Q("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADNJREFUOE9jZKAQMFKon2HUAAYah8H/////g2KJkZERZ2DjjQWKDSAmjYymA1qnA2JiAQB3SAgRq6BZyAAAAABJRU5ErkJggg==",e),t.start();let a=null;e.onPointerObservable.add(n=>{switch(n.type){case p.POINTERDOWN:a={down:n.event,last:n.event};break;case p.POINTERUP:a=null;break;case p.POINTERMOVE:a&&(a.last=n.event);break}});function T(){if(!a)return null;const r=.25*Math.min(e.getEngine().getRenderWidth(),e.getEngine().getRenderHeight()),d=a.last.clientX-a.down.clientX,u=a.down.clientY-a.last.clientY,C=f.Clamp(d/r,-1,1),x=f.Clamp(u/r,-1,1);return{thrust:1,yaw:C,pitch:x}}const y=10,w=1,L=.25,m=new i;return e.onBeforeRenderObservable.add(()=>{if(!o)return;const n=e.deltaTime/1e3,r=T();if(r){const u=b.RotationYawPitchRoll(r.yaw*n*w,r.pitch*n*w,0);o.rotationQuaternion.multiplyInPlace(u)}const d=r?o.forward.scale(r.thrust*y*n):i.Zero();m.addInPlace(d),m.scaleInPlace(1-L*n),o.position.addInPlace(m.scale(n))}),e.onBeforeRenderObservable.add(()=>{s&&(c.position=i.Lerp(c.position,s.getAbsolutePosition(),e.deltaTime/1e3*3),c.upVector=s.up),l&&(c.target=l.getAbsolutePosition())}),e}export{z as createScene};
