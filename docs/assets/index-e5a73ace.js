import{A as p,S as w,W as v,V as b,X as g,aI as M,I as S,Y as u,c as f,E as y,aJ as h,C as r,Z as m}from"./index-0c74c3a8.js";import{C as x}from"./cannon-46f0892f.js";const I="/assets/environment-sunset-c2974e07.env",R="/assets/environment-night-3d44195a.env",T="/assets/environment-river-5d3cfdcc.env",A="/assets/environment-noon-9375f108.env";window.CANNON=x;function G(t,o){t.enableOfflineSupport=!1,p.AllowMatricesInterpolation=!0;var e=new w(t);new v("Camera",75*Math.PI/180,75*Math.PI/180,20,new b(0,2.5,0),e).attachControl(o),e.enablePhysics(null,new g);const s=[I,R,T,A].map((i,c,d)=>{const l=new M(i,e),C=e.createDefaultSkybox(l,!0,1e4,.1);return B(l,C),P(C,c,d.length,a),{skybox:C,texture:l}});function a(i){for(var c=0;c<s.length;c++){const{skybox:l}=s[c];l.setEnabled(c===i)}const{texture:d}=s[i];e.environmentTexture=d}return a(0),E(e),N(e),e}function B(t,o){o.getScene().onBeforeRenderObservable.add(()=>{const e=Date.now()/1e3/4;o.rotation.set(0,e,0),t.setReflectionTextureMatrix(S.RotationY(-e))})}function P(t,o,e,n){{const s=t.getScene(),a=u.CreateSphere("cube-button",{diameter:.9},t.getScene());a.parent=s.cameras[0],a.position.set(-1.5+3*o/(e-1),3,10),a.material=t.material,a.renderingGroupId=1,a.actionManager=new f(s),a.actionManager.registerAction(new y(f.OnPickTrigger,()=>n(o))),s.onBeforeRenderObservable.add(()=>{const i=Date.now()/1e3/4;a.rotation.set(0,-i,0),a.scaling.setAll(t.isEnabled()?1.2:1)})}}function E(t){var o=new h("pedestalMaterial",t);o.metallic=0,o.roughness=.5;const e=u.CreateCylinder("cylinder",{diameter:15,faceColors:[new r(.01,.01,.01).toColor4(),new r(.01,.01,.01).toColor4(),new r(.01,.01,.01).toColor4()]},t);e.material=o,e.physicsImpostor=new m(e,m.CylinderImpostor,{mass:0,restitution:.2},t);const n=u.CreateCylinder("cylinder",{diameter:10,height:10,faceColors:[new r(0,0,0).toColor4(),new r(0,0,0).toColor4(),new r(0,0,0).toColor4()]},t);n.material=o,n.position.set(0,-5,0)}async function N(t){var o=new h("cubesMaterial",t);o.metallic=.1,o.roughness=.5;for(var e=0;e<100;e++)O(t,o),await k(10)}function O(t,o){const e=new r;r.HSVtoRGBToRef(Math.random()*360,.5,1,e);const n=u.CreateBox("cube",{size:1,faceColors:[e.toColor4(),e.toColor4(),e.toColor4(),e.toColor4(),e.toColor4(),e.toColor4()]},t);return n.material=o,n.position.set(Math.random()*5-2.5,25+Math.random()*25,Math.random()*5-2.5),n.physicsImpostor=new m(n,m.BoxImpostor,{mass:1,restitution:.5},t),n}function k(t){return new Promise(o=>setTimeout(o,t))}export{G as createScene};
