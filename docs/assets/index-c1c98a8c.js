import{S as U,f as u,V as o,Q as f,T as S,P as h,g as b}from"./runBabylonPlaygroundScene-32a4afbd.js";import{D as v}from"./directionalLight-d037032f.js";import{H as N,T as O}from"./linesBuilder-a2dae4c1.js";import{S as B}from"./sceneLoader-f06775c7.js";import{U as M}from"./sceneHelpers-bf4caa22.js";import{P as Q}from"./particleSystem-441fbe13.js";import"./ExtrasAsMetadata-129db08e.js";import"./pbrMaterial-34e2fd30.js";import"./blurPostProcess-f61d1d3e.js";import"./workerPool-f37bc04e.js";import"./dynamicTexture-7393bdcd.js";import"./utilityLayerRenderer-fefda23f.js";import"./animationGroup-a96e107c.js";function F(g,m){const e=new U(g);e.clearColor=new u(0,0,0);var P=new N("ambient light",new o(0,0,0),e);P.intensity=.25;const E=new v("sun light",new o(1,-1,-1),e);E.intensity=5,g.runRenderLoop(()=>{e.render()});const R=()=>{m.width=m.clientWidth,m.height=m.clientHeight};window.addEventListener("resize",R);const c=new M("UniversalCamera",new o(0,0,0),e);c.maxZ=11e3;let s=null,l=null,r=null;B.ImportMeshAsync(null,"https://dl.dropboxusercontent.com/s/xtxf8eo2t3bb66b/Spaceship_BarbaraTheBee.gltf","",e).then(({meshes:n})=>{r=n[0],r.rotationQuaternion=f.Identity(),s=new S("chaseCameraPosition",e),s.parent=r,s.position=new o(0,4,-15),l=new S("chaseCameraLookAt",e),l.parent=r,l.position=new o(0,2,10)});const t=new Q("starfield",1e4,e);t.createSphereEmitter(1e4,0),t.manualEmitCount=1e5,t.minLifeTime=Number.MAX_VALUE,t.maxLifeTime=Number.MAX_VALUE,t.minSize=.1*1e3,t.maxSize=.25*1e3,t.minEmitPower=0,t.maxEmitPower=0,t.gravity=new o(0,0,0),t.color1=new u(1,.8,.8,1),t.color2=new u(1,1,1,1),t.particleTexture=new O("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADNJREFUOE9jZKAQMFKon2HUAAYah8H/////g2KJkZERZ2DjjQWKDSAmjYymA1qnA2JiAQB3SAgRq6BZyAAAAABJRU5ErkJggg==",e),t.start();let i=null;e.onPointerObservable.add(n=>{switch(n.type){case h.POINTERDOWN:i={down:n.event,last:n.event};break;case h.POINTERUP:i=null;break;case h.POINTERMOVE:i&&(i.last=n.event);break}});function T(){if(!i)return null;const a=.25*Math.min(e.getEngine().getRenderWidth(),e.getEngine().getRenderHeight()),p=i.last.clientX-i.down.clientX,d=i.down.clientY-i.last.clientY,C=b.Clamp(p/a,-1,1),x=b.Clamp(d/a,-1,1);return{thrust:1,yaw:C,pitch:x}}const y=10,w=1,L=.25,A=new o;return e.onBeforeRenderObservable.add(()=>{if(!r)return;const n=e.deltaTime/1e3,a=T();if(a){const d=f.RotationYawPitchRoll(a.yaw*n*w,a.pitch*n*w,0);r.rotationQuaternion.multiplyInPlace(d)}const p=a?r.forward.scale(a.thrust*y*n):o.Zero();A.addInPlace(p),A.scaleInPlace(1-L*n),r.position.addInPlace(A.scale(n))}),e.onBeforeRenderObservable.add(()=>{s&&(c.position=o.Lerp(c.position,s.getAbsolutePosition(),e.deltaTime/1e3*3),c.upVector=s.up),l&&(c.target=l.getAbsolutePosition())}),e}export{F as createScene};
